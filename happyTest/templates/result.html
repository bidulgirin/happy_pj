{% extends './common/common.html' %}
{% load static %}
{% block contents %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
    </script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<link rel="stylesheet" href="{% static 'css/style.css' %}">

{% if request.user.is_superuser %}
{% include './common/navi.html' %}
{% endif %}
<div class="container container-sm">

    <div class="result_report">
        <h3 class="title"> ë‹¹ì‹ ì˜ í–‰ë³µ ì ìˆ˜ëŠ”?</h3>
        <h1>{{total_score}}ì </h1>
        <p>{{text}}</p>

        <canvas id="myChart"></canvas>

        {% if a_type_low or b_type_low or c_type_low %}
        íŠ¹íˆ
        {% endif %}
        {% if a_type_low %}
        <b>{{a_type_low}}</b>
        {% endif %}
        {% if b_type_low %}
        <b>{{b_type_low}}</b>
        {% endif %}
        {% if c_type_low %}
        <b>{{c_type_low}}</b>
        {% endif %}
        {% if a_type_low or b_type_low or c_type_low %}
        ì§€ìˆ˜ê°€ í‰ê· ë³´ë‹¤ ë‚®ìŠµë‹ˆë‹¤
        {% endif %}
        <p>ğŸ’Œì¶”ì²œ ì±…ğŸ’Œ</p>
        <div class="solution_datas">
            {% if bookSolution.count > 0 %}
            {% for i in bookSolution %}
            <a href="{{i.book_url|safe}}" data-aos="fade-up">
                <div class="card">
                    {% if i.cover_url %}
                    <img src="{{i.cover_url|safe}}" class="card-img-top" alt="{{i.title|safe|truncatechars:30}}">
                    {% endif %}
                </div>
            </a>
            {% endfor %}
            <script>
                AOS.init();
            </script>
            {% else %}
            <div>
                ì†”ë£¨ì…˜ ë°ì´í„°ë¥¼ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤
            </div>
            {% endif %}
        </div>


    </div>
    <div class="solution">
        <p class="title">í–‰ë³µì„ ìœ„í•œ ê¿€íŒ!</p>
        <p>âœ¨ì¶”ì²œ ì˜ìƒâœ¨</p>
        <div class="solution_datas">
            {% if solutions.count > 0 %}
            {% for i in solutions %}
            <a href="{{i.video_url|safe}}" data-aos="fade-up">
                <div class="card">
                    {% if i.thumbnail_url %}
                    <img src="{{i.thumbnail_url|safe}}" class="card-img-top" alt="...">
                    {% endif %}
                    <div class="card-body">
                        <p class="card-title">{{i.title|safe|truncatechars:30}}</p>
                    </div>
                </div>
            </a>
            {% endfor %}
            <script>
                AOS.init();
            </script>
            {% else %}
            <div>
                ì†”ë£¨ì…˜ ë°ì´í„°ë¥¼ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤
            </div>
            {% endif %}
        </div>
    </div>
</div>
<div class="area">
    <ul class="circles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    type_a = Number('{{result.final_a_type_score}}')
    type_b = Number('{{result.final_b_type_score}}')
    type_c = Number('{{result.final_c_type_score}}')
    console.log("type_a", type_a)
    console.log("type_b", type_b)
    console.log("type_c", type_c)
</script>
<script>
    const ctx = document.getElementById('myChart');

    let chart = new Chart(ctx, {
        type: 'radar',
        data: {
            datasets: [{
                label: 'í–‰ë³µì§€ìˆ˜',
                data: [type_a, type_b, type_c]
            }],
            labels: ['ê°œì¸', 'ê´€ê³„', 'ì„±ì¥']
        },
        options: {
            scales: {
                r: {
                    suggestedMin: 0,
                    suggestedMax: 50,
                }
            }
        }
    });


</script>
{% endblock %}